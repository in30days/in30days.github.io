<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta name="author" content="{{ .Site.Params.author | default "in30days" }}">

<title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

<!-- Preload fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

<!-- Main CSS - concatenate all CSS files in order -->
{{ $variables := resources.Get "css/variables.css" }}
{{ $reset := resources.Get "css/reset.css" }}
{{ $typography := resources.Get "css/typography.css" }}
{{ $layout := resources.Get "css/layout.css" }}
{{ $sidebar := resources.Get "css/sidebar.css" }}
{{ $components := resources.Get "css/components.css" }}
{{ $quiz := resources.Get "css/quiz.css" }}
{{ $shortcodes := resources.Get "css/shortcodes.css" }}
{{ $darkMode := resources.Get "css/dark-mode.css" }}
{{ $focusMode := resources.Get "css/focus-mode.css" }}
{{ $responsive := resources.Get "css/responsive.css" }}
{{ $bundledCSS := slice $variables $reset $typography $layout $sidebar $components $quiz $shortcodes $darkMode $focusMode $responsive | resources.Concat "css/bundle.css" | resources.Minify | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $bundledCSS.RelPermalink }}">

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="{{ "images/logo.svg" | relURL }}">

<!-- Open Graph -->
<meta name="course-id" content="{{ .Site.Params.courseId }}">
<meta name="course-base-url" content="{{ "/" | relURL }}">
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">

<!-- Theme color -->
<meta name="theme-color" content="{{ .Site.Params.courseColor | default "#6366f1" }}">

<!-- Course-specific CSS variables -->
<style>
  :root {
    --course-color: {{ .Site.Params.courseColor | default "#6366f1" }};
  }
</style>

<!-- Initial theme setup (prevents flash) -->
<script>
  (function() {
    const stored = localStorage.getItem('in30days_theme');
    if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  })();
</script>
