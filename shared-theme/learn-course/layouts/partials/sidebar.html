<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <a href="{{ .Site.BaseURL }}" class="sidebar-course-link">
      <span class="sidebar-course-badge" style="background-color: {{ .Site.Params.courseColor }}">
        {{ .Site.Params.courseName }}
      </span>
      <span class="sidebar-course-title">{{ .Site.Params.courseFullName }}</span>
    </a>
  </div>
  
  <div class="sidebar-progress">
    <div class="sidebar-progress-header">
      <span class="sidebar-progress-label">Your Progress</span>
      <span class="sidebar-progress-value" id="sidebar-progress-value">0%</span>
    </div>
    <div class="sidebar-progress-bar">
      <div class="sidebar-progress-fill" id="sidebar-progress-fill" style="width: 0%"></div>
    </div>
  </div>
  
  <nav class="sidebar-nav">
    <div class="weekly-nav" id="weekly-nav">
      {{ range .Site.Params.weeks }}
      <div class="week-group" data-week="{{ .id }}">
        <button class="week-header" aria-expanded="false">
          <span class="week-title-wrap">
            <span class="week-label">Section {{ .id }}</span>
            <span class="week-title">{{ .title }}</span>
          </span>
          <span class="week-progress-badge" id="week-{{ .id }}-progress">0/{{ sub (add (index  .modules 1) 1) (index  .modules 0) }}</span>
          <svg class="week-chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
        <div class="week-content">
          {{ range $i := seq (index  .modules 0) (index  .modules 1) }}
          {{ $moduleNum := printf "%02d" $i }}
          {{ $modulePage := $.Site.GetPage (printf "/module-%s" $moduleNum) }}
          <a href="{{ if $modulePage }}{{ $modulePage.RelPermalink }}{{ else }}#{{ end }}" 
             class="nav-module-item {{ if eq $.RelPermalink $modulePage.RelPermalink }}active{{ end }}" 
             data-module="{{ $i }}"
             data-status="locked">
            <span class="nav-module-status-icon"></span>
            <span class="nav-module-info">
              <span class="nav-module-label">Module {{ $i }}</span>
              <span class="nav-module-title">{{ if $modulePage }}{{ $modulePage.Title }}{{ else }}Module {{ $i }}{{ end }}</span>
            </span>
          </a>
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>
  </nav>
  
  <div class="sidebar-footer">
    {{ with .Site.Params.contributor }}
    <div class="sidebar-contributor">
      <img src="{{ .avatar }}" alt="{{ .name }}" class="contributor-avatar-sm">
      <div class="contributor-info">
        <span class="contributor-label">Contributor</span>
        <span class="contributor-name-sm">{{ .name }}</span>
      </div>
    </div>
    {{ end }}
    <div class="sidebar-actions">
      <button class="sidebar-action-btn" id="export-progress-btn" title="Export Progress">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        <span>Export</span>
      </button>
      <button class="sidebar-action-btn" id="import-progress-btn" title="Import Progress">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>
        <span>Import</span>
      </button>
    </div>
  </div>
</aside>

<div class="sidebar-overlay" id="sidebar-overlay"></div>

<!-- Mobile Bottom Progress Bar -->
<div class="mobile-progress-nav" id="mobile-progress-nav">
  <div class="mobile-progress-track">
    <div class="mobile-progress-fill" id="mobile-progress-fill" style="width: 0%"></div>
  </div>
  <div class="mobile-nav-content">
    <div class="mobile-progress-info">
      <span class="mobile-progress-percent" id="mobile-progress-percent">0% Complete</span>
    </div>
  </div>
</div>
