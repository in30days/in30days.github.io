{{ $readers := index site.Data.stats .id | default 0 }}
<article class="course-card" 
         data-difficulty="{{ .difficulty }}" 
         data-type="course"
         {{ if .comingSoon }}data-coming="true"{{ end }}
         style="--course-color: {{ .color }}">
  {{ if .comingSoon }}
  <div class="course-badge-coming-soon">Coming Soon</div>
  {{ end }}
  
  <div class="course-card-header">
    <div class="course-icon" style="background-color: {{ .color }}20; color: {{ .color }}">
      {{ if eq .icon "python" }}
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>
      {{ else if eq .icon "kubernetes" }}
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10.204 14.35l.007.01-.999 2.413a5.171 5.171 0 0 1-2.075-2.597l2.578-.437.004.005a.44.44 0 0 1 .484.606zm-.833-2.129a.44.44 0 0 0 .173-.756l.002-.011L7.585 9.7a5.143 5.143 0 0 0-.73 3.255l2.514-.725.002-.009zm1.145-1.98a.44.44 0 0 0 .699-.337l.01-.005.15-2.62a5.144 5.144 0 0 0-3.01 1.442l2.147 1.523.004-.002zm.76 2.75l.006.006 2.475.725a5.18 5.18 0 0 0-.482-2.94l-2.475.934a.44.44 0 0 0 .476 1.276zm.468-2.108l.009.004 1.964-1.707a5.158 5.158 0 0 0-2.595-1.18l.135 2.618a.44.44 0 0 0 .487.265zm1.394 4.66l.002-.003 2.014 1.609a5.163 5.163 0 0 0 .707-3.116l-2.508.483a.44.44 0 0 0-.215 1.026zm.063-2.003l.002.01 2.516.445a5.15 5.15 0 0 0-.99-2.872l-1.983 1.718a.44.44 0 0 0 .455.699zm-6.553.49l-.003.003-2.057 1.537a5.154 5.154 0 0 0 2.253 1.892l.853-2.455a.44.44 0 0 0-1.046-.977zm-.262-2.144l-.001.005-2.571-.313a5.163 5.163 0 0 0 .673 3.012l2.061-1.543a.44.44 0 0 0-.162-1.161zM12 2.008a10 10 0 1 0 10 10 10 10 0 0 0-10-10zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/></svg>
      {{ else if eq .icon "javascript" }}
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"/></svg>
      {{ else if eq .icon "rust" }}
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.687 11.709l-.995-.616a13.559 13.559 0 0 0-.028-.29l.855-.797a.344.344 0 0 0-.114-.571l-1.093-.422a8.89 8.89 0 0 0-.086-.282l.682-.947a.344.344 0 0 0-.199-.54l-1.142-.236a9.376 9.376 0 0 0-.14-.261l.48-1.066a.344.344 0 0 0-.275-.49l-1.149-.048a13.3 13.3 0 0 0-.186-.227l.263-1.145a.344.344 0 0 0-.343-.42l-1.111.142a8.542 8.542 0 0 0-.225-.185l.035-1.18a.344.344 0 0 0-.4-.334l-1.032.327c-.068-.054-.14-.108-.214-.158l-.197-1.164a.344.344 0 0 0-.444-.271l-.913.498a8.96 8.96 0 0 0-.248-.122l-.423-1.1a.344.344 0 0 0-.473-.19l-.758.648c-.088-.032-.178-.062-.269-.089L12.787.238a.344.344 0 0 0-.488-.096l-.57.77a9.19 9.19 0 0 0-.284-.048l-.77-.876a.344.344 0 0 0-.488.012l-.358.858a8.82 8.82 0 0 0-.283.04l-.876-.736a.344.344 0 0 0-.47.108l-.132.912a9.14 9.14 0 0 0-.27.095l-.947-.563a.344.344 0 0 0-.44.195l.096.934a9.088 9.088 0 0 0-.248.147l-.985-.36a.344.344 0 0 0-.397.27l.327.914a9.46 9.46 0 0 0-.214.19l-.987-.136a.344.344 0 0 0-.343.334l.545.852a9.478 9.478 0 0 0-.172.224l-.952.097a.344.344 0 0 0-.278.38l.746.758a8.973 8.973 0 0 0-.12.253l-.882.326a.344.344 0 0 0-.203.412l.92.636a9.05 9.05 0 0 0-.063.271l-.779.539a.344.344 0 0 0-.119.432l1.062.486c-.01.093-.016.186-.022.28l-.645.726a.344.344 0 0 0-.028.437l1.168.312c.003.093.01.186.019.278l-.484.883a.344.344 0 0 0 .065.427l1.233.12a9.18 9.18 0 0 0 .061.271l-.303 1.003a.344.344 0 0 0 .154.402l1.256-.084c.03.088.064.175.098.261l-.109 1.081a.344.344 0 0 0 .236.359l1.236-.284c.042.082.088.164.134.244l.09 1.116a.344.344 0 0 0 .31.3l1.173-.476c.055.074.111.147.17.218l.285 1.105a.344.344 0 0 0 .372.228l1.07-.654c.068.062.137.122.208.18l.47 1.051a.344.344 0 0 0 .422.148l.932-.81a8.744 8.744 0 0 0 .24.134l.636.962a.344.344 0 0 0 .456.063l.762-.94a8.73 8.73 0 0 0 .264.082l.777.836a.344.344 0 0 0 .474-.025l.568-1.036c.092.017.186.032.279.045l.89.685a.344.344 0 0 0 .476-.108l.36-1.098a8.59 8.59 0 0 0 .284.003l.972.507a.344.344 0 0 0 .462-.182l.143-1.123c.093-.018.186.039.278-.062l1.017.311"/></svg>
      {{ else }}
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
      {{ end }}
    </div>
    <div class="course-meta">
      <span class="course-difficulty course-difficulty--{{ .difficulty }}">{{ .difficulty }}</span>
      <span class="course-duration">{{ .totalDays }} days</span>
    </div>
  </div>
  
  <div class="course-card-body">
    <h3 class="course-title">{{ .fullName }}</h3>
    <p class="course-description">{{ .description }}</p>

    {{ if .contributor }}
    {{ $targetId := .contributor }}
    {{ $contributor := index site.Data.contributors 0 }}
    {{ range site.Data.contributors }}{{ if eq .id $targetId }}{{ $contributor = . }}{{ end }}{{ end }}
    <div class="course-contributor">
      <img src="{{ $contributor.avatar }}" alt="{{ $contributor.name }}" class="contributor-avatar">
      <span>by <span class="contributor-name">{{ $contributor.name }}</span></span>
    </div>
    {{ end }}

    <div class="course-tags">
      {{ range .tags }}
      <span class="course-tag">{{ . }}</span>
      {{ end }}
    </div>
  </div>
  
  <div class="course-card-footer">
    {{ if and (not .comingSoon) (gt $readers 0) }}
    <div class="learner-count">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
      <span>{{ if ge $readers 1000 }}{{ lang.FormatNumber 1 (div $readers 1000.0) }}k{{ else }}{{ $readers }}{{ end }} learners</span>
    </div>
    {{ end }}
    {{ if .comingSoon }}
    <span class="course-status">Coming Soon</span>
    {{ else }}
    <a href="{{ .url | relURL }}" class="course-start-btn">Start Learning</a>
    {{ end }}
  </div>
</article>
